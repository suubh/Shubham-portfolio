{"version":3,"sources":["../../../src/internal-plugins/prod-404/gatsby-node.js"],"names":["emitter","store","require","actions","PROD_404_PAGE_PATH","page404","exports","onCreatePage","page","test","path","createPage","on","action","payload","dispatch","deletePage"],"mappings":";;AAAA,MAAM;AAAEA,EAAAA,OAAF;AAAWC,EAAAA;AAAX,IAAqBC,OAAO,CAAE,aAAF,CAAlC;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAcD,OAAO,CAAE,qBAAF,CAA3B;;AAEA,MAAME,kBAAkB,GAAI,WAA5B;AAEA,IAAIC,OAAO,GAAG,IAAd;;AACAC,OAAO,CAACC,YAAR,GAAuB,CAAC;AAAEC,EAAAA,IAAF;AAAQP,EAAAA,KAAR;AAAeE,EAAAA;AAAf,CAAD,KAA8B;AACnD;AACA;AACA;AACA,MAAI,CAACE,OAAD,IAAY,cAAcI,IAAd,CAAmBD,IAAI,CAACE,IAAxB,CAAhB,EAA+C;AAC7CP,IAAAA,OAAO,CAACQ,UAAR,CAAmB,EACjB,GAAGH,IADc;AAEjBE,MAAAA,IAAI,EAAEN;AAFW,KAAnB;AAIAC,IAAAA,OAAO,GAAGG,IAAV;AACD;AACF,CAXD;;AAaAR,OAAO,CAACY,EAAR,CAAY,aAAZ,EAA0BC,MAAM,IAAI;AAClC,MAAIR,OAAO,IAAIQ,MAAM,CAACC,OAAP,CAAeJ,IAAf,KAAwBL,OAAO,CAACK,IAA/C,EAAqD;AACnDT,IAAAA,KAAK,CAACc,QAAN,CACEZ,OAAO,CAACa,UAAR,CAAmB,EACjB,GAAGX,OADc;AAEjBK,MAAAA,IAAI,EAAEN;AAFW,KAAnB,CADF;AAMAC,IAAAA,OAAO,GAAG,IAAV;AACD;AACF,CAVD","sourcesContent":["const { emitter, store } = require(`../../redux`)\nconst { actions } = require(`../../redux/actions`)\n\nconst PROD_404_PAGE_PATH = `/404.html`\n\nlet page404 = null\nexports.onCreatePage = ({ page, store, actions }) => {\n  // Copy /404/ to /404.html as many static site hosts expect\n  // site 404 pages to be named this.\n  // https://www.gatsbyjs.org/docs/how-to/adding-common-features/add-404-page/\n  if (!page404 && /^\\/?404\\/?$/.test(page.path)) {\n    actions.createPage({\n      ...page,\n      path: PROD_404_PAGE_PATH,\n    })\n    page404 = page\n  }\n}\n\nemitter.on(`DELETE_PAGE`, action => {\n  if (page404 && action.payload.path === page404.path) {\n    store.dispatch(\n      actions.deletePage({\n        ...page404,\n        path: PROD_404_PAGE_PATH,\n      })\n    )\n    page404 = null\n  }\n})\n"],"file":"gatsby-node.js"}